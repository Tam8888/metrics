\documentclass[a4wide,11pt]{article}
\usepackage[dvips]{graphicx}
\usepackage{url}
\usepackage{epstopdf}
\usepackage{float}
\usepackage{csvsimple}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{fancyhdr}
\usepackage{graphicx}

\usepackage{xcolor}
\usepackage{textcomp}

\usepackage{pgfgantt}

\usepackage{enumitem}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\pagestyle{fancy}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\urlstyle{same}


\definecolor{barblue}{RGB}{153,204,254}
\definecolor{groupblue}{RGB}{51,102,254}
\definecolor{linkred}{RGB}{165,0,33}
\renewcommand\sfdefault{phv}
%\renewcommand\mddefault{mc} % this causes bold, italic, .. not to be displayed
\renewcommand\bfdefault{bc}
\setganttlinklabel{s-s}{START-TO-START}
\setganttlinklabel{f-s}{FINISH-TO-START}
\setganttlinklabel{f-f}{FINISH-TO-FINISH}
\sffamily


\begin{document}

\newcommand{\yesbox}{\colorbox{green!90}{\textcolor{white!90}{\textsf{\textbf{Yes}}}}}
\newcommand{\nobox}{\colorbox{red!90}{\textcolor{white!90}{\textsf{\textbf{No}}}}}

\title{INDIGO-DataCloud Software Quality Assurance (SQA) Report \VAR{period}\\[1.5em] 
       \huge{\texttt{\VAR{product.id}}}\\
}

\date{} 
\maketitle

\Large

\vspace{-3em}
\begin{center}
\colorbox{gray!50}{\textcolor{white}{\textsf{\textbf{\strut SQA Progress Status}}}}\colorbox{blue!50}{\textcolor{white}{\textsf{\textbf{\strut ACCEPTED}}}} \\
\end{center}
\vspace{4em}
%\colorbox{gray!50}{\textcolor{white}{\textsf{\textbf{SQA Progress Summary}}}} \vspace{0.1em}\\
\begin{center}
\begin{tabular}{ll}
    %\multicolumn{2}{l}{\colorbox{gray!50}{\textcolor{white}{\textsf{\textbf{SQA Progress Summary}}}}} \vspace{1em}\\
    GitHub repository & \BLOCK{if product.repository.url}\yesbox\BLOCK{else}\nobox\BLOCK{endif} \vspace{0.6em}\\
    Code style adherence & \BLOCK{if product.code_style.data}\yesbox\BLOCK{else}\nobox\BLOCK{endif} \vspace{-1.7em} \\
    Code coverage & \begin{ganttchart}[
        canvas/.append style={fill=none, draw=none},
        hgrid style/.style={draw=none, fill=none},
        vgrid={*1{draw=none, fill=none}},
        title/.style={draw=none, fill=none},
        title label font=\bfseries\footnotesize,
        title label node/.append style={below=7pt},
        include title in canvas=false,
        bar label font=\mdseries\small\color{black!70},
        bar label node/.append style={left=2cm},
        bar/.append style={draw=none, fill=black!63},
        bar incomplete/.append style={fill=barblue},
        bar progress label font=\mdseries\footnotesize\color{black!70},
        bar top shift=1, bar height=0.8
        ]{1}{5}
        \ganttbar[progress=80]{}{1}{5}
    \end{ganttchart} \vspace{0.6em}\\
    GitBook documentation & \BLOCK{if product.gitbook.url}\yesbox\BLOCK{else}\nobox\BLOCK{endif} \\
\end{tabular}
\end{center}


\normalsize 
\newpage


%
% OpenProject tasks - pgfgantt
%
\begin{ganttchart}[
    canvas/.append style={fill=none, draw=black!5, line width=.75pt},
    hgrid style/.style={draw=black!5, line width=.75pt},
    vgrid={*1{draw=black!5, line width=.75pt}},
    today=7,
    today rule/.style={
    draw=black!64,
    dash pattern=on 3.5pt off 4.5pt,
    line width=1.5pt
    },
    today label font=\small\bfseries,
    title/.style={draw=none, fill=none},
    title label font=\bfseries\footnotesize,
    title label node/.append style={below=7pt},
    include title in canvas=false,
    bar label font=\mdseries\small\color{black!70},
    bar label node/.append style={left=2cm},
    bar/.append style={draw=none, fill=black!63},
    bar incomplete/.append style={fill=barblue},
    bar progress label font=\mdseries\footnotesize\color{black!70},
    group incomplete/.append style={fill=groupblue},
    group left shift=0,
    group right shift=0,
    group height=.5,
    group peaks tip position=0,
    group label node/.append style={left=.6cm},
    group progress label font=\bfseries\small,
    link/.style={-latex, line width=1.5pt, linkred},
    link label font=\scriptsize\bfseries,
    link label node/.append style={below left=-2pt and 0pt}
    ]{1}{13}
    \gantttitle[
        title label node/.append style={below left=7pt and -3pt}
    ]{WEEKS:\quad1}{1}
    \gantttitlelist{2,...,13}{1} \\
    \ganttgroup[progress=\VAR{product.tasks.parent.progress}]{\textbf{\#\VAR{product.tasks.parent.id}} \VAR{product.id} SQA FOR 1ST RELEASE}{1}{10} \\
    \BLOCK{ for child in product.tasks.children }
        \ganttbar[
            progress=\VAR{child.progress},
            name=WBS1A
        ]{\textbf{\#\VAR{child.id}} \VAR{child.name}}{1}{8} \\
    \BLOCK{ endfor } [grid]
\end{ganttchart}


\newpage

\input{title_repository.tex}
\BLOCK{if product.repository.url}
Repository exists under \texttt{indigo-dc} GitHub organization: \vspace{0.1em} \begin{center}\url{\VAR{product.repository.url}}\end{center}
\BLOCK{else}
Repository is currently \textbf{not available} under \href{https://github.com/indigo-dc/}{\texttt{indigo-dc}} GitHub organization.
\BLOCK{endif}


\input{title_codestyle.tex}
\begin{tabular}{ll}
    Code style definition & \href{\VAR{product.code_style.data.url}}{\VAR{product.code_style.data.name}} \\
    Community/de-facto standard & \VAR{product.code_style.data.defacto} \\
    Exceptions & \VAR{product.code_style.exceptions} \\
    Richness & \VAR{product.code_style.richness} \\
\end{tabular}
 
 
\input{title_unittest.tex}
\begin{center}
% Trend graph (jenkins)
\textbf{Trend graph}\par\medskip
\includegraphics[scale=0.5]{\VAR{product.unit_test.graph}}
% Cobertura report (gantt chart)
\begin{ganttchart}[
    canvas/.append style={fill=none, draw=black!5, line width=.75pt},
    hgrid style/.style={draw=black!5, line width=.75pt},
    vgrid={*1{draw=black!5, line width=.75pt}},
    title/.style={draw=none, fill=none},
    title label font=\bfseries\footnotesize,
    title label node/.append style={below=7pt},
    include title in canvas=false,
    bar label font=\mdseries\small\color{black!70},
    bar label node/.append style={left=2cm},
    bar/.append style={draw=none, fill=black!63},
    bar incomplete/.append style={fill=barblue},
    bar progress label font=\mdseries\footnotesize\color{black!70},
    group incomplete/.append style={fill=groupblue},
    group left shift=0,
    group right shift=0,
    group height=.5,
    group peaks tip position=0,
    group label node/.append style={left=.6cm},
    group progress label font=\bfseries\small,
    link/.style={-latex, line width=1.5pt, linkred},
    link label font=\scriptsize\bfseries,
    link label node/.append style={below left=-2pt and 0pt}
    ]{1}{5}
    %\gantttitle{Cobertura Report}{12} \\
    %\ganttgroup[progress=45]{Group 1}{1}{12} \\
    \BLOCK{ for element in product.unit_test.data }
        \ganttbar[progress=\VAR{element.ratio}]{\VAR{element.name} (\VAR{element.numerator}/\VAR{element.denominator})}{1}{3} \\
    \BLOCK{ endfor } [grid]
\end{ganttchart}
\end{center}


\input{title_functional_integration.tex}


\input{title_gitbook.tex}
\BLOCK{if product.gitbook.url}
Documentation available under \texttt{indigo-dc} GitBook organization: \vspace{0.1em} \begin{center}\url{\VAR{product.gitbook.url}}\end{center}
\BLOCK{else}
Documentation is currently \textbf{not available} under \href{https://www.gitbook.com/@indigo-dc/dashboard}{\texttt{indigo-dc}} GitBook organization.
\BLOCK{endif}

\input{title_configuration.tex}


\newpage
\input{title_annex.tex}

\end{document}
